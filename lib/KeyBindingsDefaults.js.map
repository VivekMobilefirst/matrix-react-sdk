{"version":3,"file":"KeyBindingsDefaults.js","names":["getBindingsByCategory","category","CATEGORIES","settingNames","reduce","bindings","action","keyCombo","getKeyboardShortcuts","default","push","messageComposerBindings","CategoryName","COMPOSER","SettingsStore","getValue","KeyBindingAction","SendMessage","key","Key","ENTER","ctrlOrCmdKey","NewLine","shiftKey","IS_MAC","altKey","autocompleteBindings","AUTOCOMPLETE","ForceCompleteAutocomplete","TAB","ctrlKey","CompleteAutocomplete","roomListBindings","ROOM_LIST","roomBindings","ROOM","SearchInRoom","F","navigationBindings","NAVIGATION","accessibilityBindings","ACCESSIBILITY","callBindings","CALLS","labsBindings","SdkConfig","get","LABS","defaultBindingsProvider","getMessageComposerBindings","getAutocompleteBindings","getRoomListBindings","getRoomBindings","getNavigationBindings","getAccessibilityBindings","getCallBindings","getLabsBindings"],"sources":["../src/KeyBindingsDefaults.ts"],"sourcesContent":["/*\nCopyright 2021 Clemens Zeidler\nCopyright 2022 Å imon Brandner <simon.bra.ag@gmail.com>\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport { IS_MAC, Key } from \"./Keyboard\";\nimport SettingsStore from \"./settings/SettingsStore\";\nimport SdkConfig from \"./SdkConfig\";\nimport { IKeyBindingsProvider, KeyBinding } from \"./KeyBindingsManager\";\nimport {\n    CATEGORIES,\n    CategoryName,\n    KeyBindingAction,\n} from \"./accessibility/KeyboardShortcuts\";\nimport { getKeyboardShortcuts } from \"./accessibility/KeyboardShortcutUtils\";\n\nexport const getBindingsByCategory = (category: CategoryName): KeyBinding[] => {\n    return CATEGORIES[category].settingNames.reduce((bindings, action) => {\n        const keyCombo = getKeyboardShortcuts()[action]?.default;\n        if (keyCombo) {\n            bindings.push({ action, keyCombo });\n        }\n        return bindings;\n    }, []);\n};\n\nconst messageComposerBindings = (): KeyBinding[] => {\n    const bindings = getBindingsByCategory(CategoryName.COMPOSER);\n\n    if (SettingsStore.getValue('MessageComposerInput.ctrlEnterToSend')) {\n        bindings.push({\n            action: KeyBindingAction.SendMessage,\n            keyCombo: {\n                key: Key.ENTER,\n                ctrlOrCmdKey: true,\n            },\n        });\n        bindings.push({\n            action: KeyBindingAction.NewLine,\n            keyCombo: {\n                key: Key.ENTER,\n            },\n        });\n        bindings.push({\n            action: KeyBindingAction.NewLine,\n            keyCombo: {\n                key: Key.ENTER,\n                shiftKey: true,\n            },\n        });\n    } else {\n        bindings.push({\n            action: KeyBindingAction.SendMessage,\n            keyCombo: {\n                key: Key.ENTER,\n            },\n        });\n        bindings.push({\n            action: KeyBindingAction.NewLine,\n            keyCombo: {\n                key: Key.ENTER,\n                shiftKey: true,\n            },\n        });\n        if (IS_MAC) {\n            bindings.push({\n                action: KeyBindingAction.NewLine,\n                keyCombo: {\n                    key: Key.ENTER,\n                    altKey: true,\n                },\n            });\n        }\n    }\n\n    return bindings;\n};\n\nconst autocompleteBindings = (): KeyBinding[] => {\n    const bindings = getBindingsByCategory(CategoryName.AUTOCOMPLETE);\n\n    bindings.push({\n        action: KeyBindingAction.ForceCompleteAutocomplete,\n        keyCombo: {\n            key: Key.TAB,\n        },\n    });\n    bindings.push({\n        action: KeyBindingAction.ForceCompleteAutocomplete,\n        keyCombo: {\n            key: Key.TAB,\n            ctrlKey: true,\n        },\n    });\n    bindings.push({\n        action: KeyBindingAction.CompleteAutocomplete,\n        keyCombo: {\n            key: Key.ENTER,\n        },\n    });\n    bindings.push({\n        action: KeyBindingAction.CompleteAutocomplete,\n        keyCombo: {\n            key: Key.ENTER,\n            ctrlKey: true,\n        },\n    });\n\n    return bindings;\n};\n\nconst roomListBindings = (): KeyBinding[] => {\n    return getBindingsByCategory(CategoryName.ROOM_LIST);\n};\n\nconst roomBindings = (): KeyBinding[] => {\n    const bindings = getBindingsByCategory(CategoryName.ROOM);\n\n    if (SettingsStore.getValue('ctrlFForSearch')) {\n        bindings.push({\n            action: KeyBindingAction.SearchInRoom,\n            keyCombo: {\n                key: Key.F,\n                ctrlOrCmdKey: true,\n            },\n        });\n    }\n\n    return bindings;\n};\n\nconst navigationBindings = (): KeyBinding[] => {\n    return getBindingsByCategory(CategoryName.NAVIGATION);\n};\n\nconst accessibilityBindings = (): KeyBinding[] => {\n    return getBindingsByCategory(CategoryName.ACCESSIBILITY);\n};\n\nconst callBindings = (): KeyBinding[] => {\n    return getBindingsByCategory(CategoryName.CALLS);\n};\n\nconst labsBindings = (): KeyBinding[] => {\n    if (!SdkConfig.get(\"show_labs_settings\")) return [];\n\n    return getBindingsByCategory(CategoryName.LABS);\n};\n\nexport const defaultBindingsProvider: IKeyBindingsProvider = {\n    getMessageComposerBindings: messageComposerBindings,\n    getAutocompleteBindings: autocompleteBindings,\n    getRoomListBindings: roomListBindings,\n    getRoomBindings: roomBindings,\n    getNavigationBindings: navigationBindings,\n    getAccessibilityBindings: accessibilityBindings,\n    getCallBindings: callBindings,\n    getLabsBindings: labsBindings,\n};\n"],"mappings":"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"}